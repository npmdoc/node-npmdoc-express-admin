<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/simov/express-admin"

    >express-admin (v1.3.0)</a>
</h1>
<h4>MySql, MariaDB, SQLite and PostgreSQL database admin built with Express and Bootstrap</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin">module express-admin</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.init">
            function <span class="apidocSignatureSpan">express-admin.</span>init
            <span class="apidocSignatureSpan">(config, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.initCommandLine">
            function <span class="apidocSignatureSpan">express-admin.</span>initCommandLine
            <span class="apidocSignatureSpan">(args, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.initDatabase">
            function <span class="apidocSignatureSpan">express-admin.</span>initDatabase
            <span class="apidocSignatureSpan">(args, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.initServer">
            function <span class="apidocSignatureSpan">express-admin.</span>initServer
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.initSettings">
            function <span class="apidocSignatureSpan">express-admin.</span>initSettings
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>404</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>app</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>auth</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>cli</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>editview</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>filter</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>form</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>list</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>listview</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>login</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>mainview</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>mtm</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>otm</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>pagination</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>project</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>render</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>routes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>schema</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>settings</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>stc</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>table</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>tbl</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>update</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>upload</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>user</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.</span>validate</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.404">module express-admin.404</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.404.get">
            function <span class="apidocSignatureSpan">express-admin.404.</span>get
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.app">module express-admin.app</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.app.init">
            function <span class="apidocSignatureSpan">express-admin.app.</span>init
            <span class="apidocSignatureSpan">(config, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.app.initCommandLine">
            function <span class="apidocSignatureSpan">express-admin.app.</span>initCommandLine
            <span class="apidocSignatureSpan">(args, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.app.initDatabase">
            function <span class="apidocSignatureSpan">express-admin.app.</span>initDatabase
            <span class="apidocSignatureSpan">(args, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.app.initServer">
            function <span class="apidocSignatureSpan">express-admin.app.</span>initServer
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.app.initSettings">
            function <span class="apidocSignatureSpan">express-admin.app.</span>initSettings
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.auth">module express-admin.auth</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.auth.login">
            function <span class="apidocSignatureSpan">express-admin.auth.</span>login
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.auth.logout">
            function <span class="apidocSignatureSpan">express-admin.auth.</span>logout
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.auth.restrict">
            function <span class="apidocSignatureSpan">express-admin.auth.</span>restrict
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.auth.status">
            function <span class="apidocSignatureSpan">express-admin.auth.</span>status
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.cli">module express-admin.cli</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.cli.Command">
            function <span class="apidocSignatureSpan">express-admin.cli.</span>Command
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.cli.Option">
            function <span class="apidocSignatureSpan">express-admin.cli.</span>Option
            <span class="apidocSignatureSpan">(flags, description)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.cli.getConfigPath">
            function <span class="apidocSignatureSpan">express-admin.cli.</span>getConfigPath
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.cli.promptForAdmin">
            function <span class="apidocSignatureSpan">express-admin.cli.</span>promptForAdmin
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.cli.promptForData">
            function <span class="apidocSignatureSpan">express-admin.cli.</span>promptForData
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.cli.promptForDatabase">
            function <span class="apidocSignatureSpan">express-admin.cli.</span>promptForDatabase
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.cli.promptForServer">
            function <span class="apidocSignatureSpan">express-admin.cli.</span>promptForServer
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">express-admin.cli.</span>_eventsCount</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.cli.</span>_args</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.cli.</span>_events</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.cli.</span>_execs</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.cli.</span>args</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.cli.</span>commands</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.cli.</span>options</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express-admin.cli.</span>rawArgs</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">express-admin.cli.</span>_name</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.editview">module express-admin.editview</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.editview.get">
            function <span class="apidocSignatureSpan">express-admin.editview.</span>get
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.editview.post">
            function <span class="apidocSignatureSpan">express-admin.editview.</span>post
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.filter">module express-admin.filter</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.filter.getColumns">
            function <span class="apidocSignatureSpan">express-admin.filter.</span>getColumns
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.filter.getOrderColumns">
            function <span class="apidocSignatureSpan">express-admin.filter.</span>getOrderColumns
            <span class="apidocSignatureSpan">(req, args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.filter.prepareSession">
            function <span class="apidocSignatureSpan">express-admin.filter.</span>prepareSession
            <span class="apidocSignatureSpan">(req, args)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.form">module express-admin.form</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.form.setActiveMultiple">
            function <span class="apidocSignatureSpan">express-admin.form.</span>setActiveMultiple
            <span class="apidocSignatureSpan">(column, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.form.setActiveRadio">
            function <span class="apidocSignatureSpan">express-admin.form.</span>setActiveRadio
            <span class="apidocSignatureSpan">(column, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.form.setActiveSingle">
            function <span class="apidocSignatureSpan">express-admin.form.</span>setActiveSingle
            <span class="apidocSignatureSpan">(column, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.form.value">
            function <span class="apidocSignatureSpan">express-admin.form.</span>value
            <span class="apidocSignatureSpan">(column, value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.list">module express-admin.list</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.list.get">
            function <span class="apidocSignatureSpan">express-admin.list.</span>get
            <span class="apidocSignatureSpan">(args, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.listview">module express-admin.listview</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.listview.get">
            function <span class="apidocSignatureSpan">express-admin.listview.</span>get
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.listview.post">
            function <span class="apidocSignatureSpan">express-admin.listview.</span>post
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.login">module express-admin.login</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.login.get">
            function <span class="apidocSignatureSpan">express-admin.login.</span>get
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.mainview">module express-admin.mainview</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.mainview.get">
            function <span class="apidocSignatureSpan">express-admin.mainview.</span>get
            <span class="apidocSignatureSpan">(req, res, next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.mtm">module express-admin.mtm</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.mtm.get">
            function <span class="apidocSignatureSpan">express-admin.mtm.</span>get
            <span class="apidocSignatureSpan">(args, rows, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.otm">module express-admin.otm</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.otm._getData">
            function <span class="apidocSignatureSpan">express-admin.otm.</span>_getData
            <span class="apidocSignatureSpan">(args, ref, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.otm.get">
            function <span class="apidocSignatureSpan">express-admin.otm.</span>get
            <span class="apidocSignatureSpan">(args, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.pagination">module express-admin.pagination</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.pagination.get">
            function <span class="apidocSignatureSpan">express-admin.pagination.</span>get
            <span class="apidocSignatureSpan">(args, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.project">module express-admin.project</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.project.create">
            function <span class="apidocSignatureSpan">express-admin.project.</span>create
            <span class="apidocSignatureSpan">(dpath, data, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.project.exists">
            function <span class="apidocSignatureSpan">express-admin.project.</span>exists
            <span class="apidocSignatureSpan">(dpath)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.render">module express-admin.render</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.render.admin">
            function <span class="apidocSignatureSpan">express-admin.render.</span>admin
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.routes">module express-admin.routes</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.routes.init">
            function <span class="apidocSignatureSpan">express-admin.routes.</span>init
            <span class="apidocSignatureSpan">(tables, custom)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.schema">module express-admin.schema</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.schema.getColumns">
            function <span class="apidocSignatureSpan">express-admin.schema.</span>getColumns
            <span class="apidocSignatureSpan">(client, table, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.schema.getData">
            function <span class="apidocSignatureSpan">express-admin.schema.</span>getData
            <span class="apidocSignatureSpan">(client, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.schema.getTables">
            function <span class="apidocSignatureSpan">express-admin.schema.</span>getTables
            <span class="apidocSignatureSpan">(client, type, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.settings">module express-admin.settings</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.settings.refresh">
            function <span class="apidocSignatureSpan">express-admin.settings.</span>refresh
            <span class="apidocSignatureSpan">(settings, info)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.stc">module express-admin.stc</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.stc.get">
            function <span class="apidocSignatureSpan">express-admin.stc.</span>get
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.table">module express-admin.table</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.table.blank">
            function <span class="apidocSignatureSpan">express-admin.table.</span>blank
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.table.get">
            function <span class="apidocSignatureSpan">express-admin.table.</span>get
            <span class="apidocSignatureSpan">(args, rows)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.table.insert">
            function <span class="apidocSignatureSpan">express-admin.table.</span>insert
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.table.records">
            function <span class="apidocSignatureSpan">express-admin.table.</span>records
            <span class="apidocSignatureSpan">(args, rows)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.tbl">module express-admin.tbl</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.tbl.get">
            function <span class="apidocSignatureSpan">express-admin.tbl.</span>get
            <span class="apidocSignatureSpan">(args, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.update">module express-admin.update</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.update.update">
            function <span class="apidocSignatureSpan">express-admin.</span>update
            <span class="apidocSignatureSpan">(args, done)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.upload">module express-admin.upload</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.upload.loopRecords">
            function <span class="apidocSignatureSpan">express-admin.upload.</span>loopRecords
            <span class="apidocSignatureSpan">(args, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.user">module express-admin.user</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.user.create">
            function <span class="apidocSignatureSpan">express-admin.user.</span>create
            <span class="apidocSignatureSpan">(name, pass, admin, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express-admin.validate">module express-admin.validate</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.validate.admin">
            function <span class="apidocSignatureSpan">express-admin.validate.</span>admin
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express-admin.validate.adminPassword">
            function <span class="apidocSignatureSpan">express-admin.validate.</span>adminPassword
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin" id="apidoc.module.express-admin">module express-admin</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.init" id="apidoc.element.express-admin.init">
        function <span class="apidocSignatureSpan">express-admin.</span>init
        <span class="apidocSignatureSpan">(config, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (config, done) {
		this.initDatabase(config, function (err) {
			if (err) return done(err);
			this.initSettings(config);
			return done(null, this.initServer(config));
		}.bind(this));
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		next();
	});

	// routes

	// init regexes
	var _routes = routes.<span class="apidocCodeKeywordSpan">init</span>(args.settings, args.custom);

	// register custom apps
	(function () {
		var have = false;
		for (var key in args.custom) {
			var _app = args.custom[key].app;
			if (_app &#x26;&#x26; _app.path &#x26;&#x26; fs.existsSync(_app.path)) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.initCommandLine" id="apidoc.element.express-admin.initCommandLine">
        function <span class="apidocSignatureSpan">express-admin.</span>initCommandLine
        <span class="apidocSignatureSpan">(args, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initCommandLine(args, cb) {
	if (!fs.existsSync(args.dpath)) {
		console.log(&#x27;Config directory path doesn\&#x27;t exists!&#x27;.red);
		process.exit();
	}
	if (project.exists(args.dpath)) return cb();
	// else
	cli.promptForData(function (err, data) {
		if (err) return cb(err);
		project.create(args.dpath, data, cb);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.initDatabase" id="apidoc.element.express-admin.initDatabase">
        function <span class="apidocSignatureSpan">express-admin.</span>initDatabase
        <span class="apidocSignatureSpan">(args, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initDatabase(args, done) {
	try {
		var client = new Client(args.config);
	} catch (err) {
		return done(err);
	}

	async.series([
		function (done) {
			var options = args.config.mysql||args.config.pg||args.config.sqlite;
			client.connect(options, function (err) {
				if (err) return done(err);
				var x = new Xsql({
					dialect: client.name,
					schema: client.config.schema});
				if (&#x27;function&#x27;===typeof qb) qb = qb(x);
				done();
			});
		},
		function (done) {
			var sql = qb.partials.tables(client.config.schema);
			client.query(sql, function (err, rows) {
				if (err) return done(err);
				if (!rows.length) return done(new Error(&#x27;Empty schema!&#x27;));
				done();
			});
		},
		function (done) {
			schema.getData(client, function (err, data) {
				if (err) return done(err);
				// write back the settings
				var fpath = path.join(args.dpath, &#x27;settings.json&#x27;),
					updated = settings.refresh(args.settings, data);
				fs.writeFileSync(fpath, JSON.stringify(updated, null, 4), &#x27;utf8&#x27;);

				args.settings = updated;
				done();
			});
		}
	], function (err) {
		if (err) return done(err);
		args.db = {client:client};
		done();
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

exports = module.exports = {
	initCommandLine: initCommandLine,
	initDatabase: initDatabase,
	initSettings: initSettings,
	initServer: initServer,
	init: function (config, done) {
		this.<span class="apidocCodeKeywordSpan">initDatabase</span>(config, function (err) {
			if (err) return done(err);
			this.initSettings(config);
			return done(null, this.initServer(config));
		}.bind(this));
	}
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.initServer" id="apidoc.element.express-admin.initServer">
        function <span class="apidocSignatureSpan">express-admin.</span>initServer
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initServer(args) {
	var r = require(&#x27;./routes&#x27;);

	// general settings
	var app = express()
		.set(&#x27;views&#x27;, path.resolve(__dirname, &#x27;./views&#x27;))
		.set(&#x27;view engine&#x27;, &#x27;html&#x27;)
		.engine(&#x27;html&#x27;, consolidate.hogan)

		.use(logger(&#x27;dev&#x27;))
		.use(bodyParser.json())
		.use(bodyParser.urlencoded({extended: true}))
		.use(multipart())

		.use(cookieParser())
		.use(args.session || session({name: &#x27;express-admin&#x27;, secret: &#x27;very secret - required&#x27;,
						saveUninitialized: true, resave: true}))
		.use(r.auth.status)// session middleware
		.use(csrf())

		.use(methodOverride())
		.use(serveStatic(path.join(__dirname, &#x27;public&#x27;)))
		.use(serveStatic((function () {
			var dpath = path.resolve(__dirname, &#x27;node_modules/express-admin-static&#x27;);
			if (!fs.existsSync(dpath)) {
				dpath = path.resolve(__dirname, &#x27;../express-admin-static&#x27;);
			}
			return dpath;
		})()));

	if (!args.debug) app.set(&#x27;view cache&#x27;, true);

	// register custom static local paths
	for (var key in args.custom) {
		var assets = args.custom[key].public;
		if (!assets || !assets.local || !assets.local.path ||
			!fs.existsSync(assets.local.path)) continue;
		app.use(serveStatic(assets.local.path));
	}

	// pass server wide variables
	app.use(function (req, res, next) {
		// app data
		res.locals._admin = args;

		// i18n
		var lang = req.cookies.lang || &#x27;en&#x27;;
		res.cookie(&#x27;lang&#x27;, lang, {path: &#x27;/&#x27;, maxAge: 900000000});
		moment.locale(lang == &#x27;cn&#x27; ? &#x27;zh-cn&#x27; : lang);

		// template vars
		res.locals.string = args.langs[lang];
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.get(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
	var _routes = routes.init(args.settings, args.custom);

	// register custom apps
	(function () {
		var have = false;
		for (var key in args.custom) {
			var _app = args.custom[key].app;
			if (_app &#x26;&#x26; _app.path &#x26;&#x26; fs.existsSync(_app.path)) {
				var view = require(_app.path);
				app.use(view);
				have = true;
			}
		}
		if (have &#x26;&#x26; _routes.custom) app.all(_routes.custom, r.auth.restrict, r.render.admin);
	}());

	// login/logout
	app.get(&#x27;/login&#x27;, r.login.get, r.render.admin);
	app.post(&#x27;/login&#x27;, r.auth.login);
	app.get(&#x27;/logout&#x27;, r.auth.logout);

	// editview
	app.get(_routes.editview, r.auth.restrict, r.editview.get, r.render.admin);
	app.post(_routes.editview, r.auth.restrict, r.editview.post, r.render.admin);

	// listview
	app.get(_routes.listview, r.auth.restrict, r.listview.get, r.render.admin);
	app.post(_routes.listview, r.auth.restrict, r.listview.post, r.render.admin);

	// mainview
	app.get(_routes.mainview, r.auth.restrict, r.mainview.get, r.render.admin);

	// not found
	app.all(&#x27;*&#x27;, r.auth.restrict, r.notfound.get, r.render.admin);

	return app;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	initDatabase: initDatabase,
	initSettings: initSettings,
	initServer: initServer,
	init: function (config, done) {
		this.initDatabase(config, function (err) {
			if (err) return done(err);
			this.initSettings(config);
			return done(null, this.<span class="apidocCodeKeywordSpan">initServer</span>(config));
		}.bind(this));
	}
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.initSettings" id="apidoc.element.express-admin.initSettings">
        function <span class="apidocSignatureSpan">express-admin.</span>initSettings
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initSettings(args) {
	// route variables

	// upload
	var upload = args.config.app.upload || path.join(__dirname, &#x27;public/upload&#x27;);
	args.config.app.upload = upload;
	if (!fs.existsSync(upload)) fs.mkdirSync(upload);

	// languages
	args.langs = (function () {
		var dpath = path.join(__dirname, &#x27;config/lang&#x27;),
			files = fs.readdirSync(dpath),
			langs = {};
		for (var i=0; i &#x3c; files.length; i++) {
			var name = files[i].replace(path.extname(files[i]), &#x27;&#x27;);
			langs[name] = require(path.join(dpath, files[i]));
		}
		return langs;
	}());

	// slug to table map
	args.slugs = (function () {
		var slugs = {};
		for (var key in args.settings) {
			slugs[args.settings[key].slug] = key;
		}
		return slugs;
	}());

	// debug
	args.debug = args.config.app.debug || (cli.dev ? true : false);
	// if (!args.debug) console.warn = function(){};
	// log
	args.log = args.config.app.log || (cli.log ? true : false);

	// events
	for (var key in args.custom) {
		var fpath = args.custom[key].events;
		if (fpath) break;
	}
	var events = fpath ? require(fpath) : {};
	if (!events.hasOwnProperty(&#x27;preSave&#x27;))
		events.preSave = function (req, res, args, next) {next()};
	if (!events.hasOwnProperty(&#x27;postSave&#x27;))
		events.postSave = function (req, res, args, next) {next()};
	if (!events.hasOwnProperty(&#x27;preList&#x27;))
		events.preList = function (req, res, args, next) {next()};
	args.events = events;


	// template variables

	// root
	if (args.config.app.root) {
		var root = args.config.app.root;
		if (/.*\/$/.test(root)) args.config.app.root = root.slice(0,-1);
	} else {
		args.config.app.root = &#x27;&#x27;;
	}

	// layouts/themes/languages
	args.layouts = args.config.app.layouts;
	args.themes = args.config.app.themes
		? {theme: require(path.join(__dirname, &#x27;config/themes&#x27;))} : null;

	args.languages = (function () {
		if (!args.config.app.languages) return null;
		var langs = [];
		for (var key in args.langs) {
			langs.push({key: key, name: args.langs[key].name});
		}
		return {language: langs};
	}());

	// static
	args.libs = dcopy(require(path.join(__dirname, &#x27;config/libs&#x27;)));
	args.libs.external = {css: [], js: []};
	for (var key in args.custom) {
		var assets = args.custom[key].public;
		if (!assets) continue;
		if (assets.local) {
			args.libs.js = args.libs.js.concat(assets.local.js||[]);
			args.libs.css = args.libs.css.concat(assets.local.css||[]);
		}
		if (assets.external) {
			args.libs.external.js = args.libs.external.js.concat(assets.external.js||[]);
			args.libs.external.css = args.libs.external.css.concat(assets.external.css||[]);
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	initCommandLine: initCommandLine,
	initDatabase: initDatabase,
	initSettings: initSettings,
	initServer: initServer,
	init: function (config, done) {
		this.initDatabase(config, function (err) {
			if (err) return done(err);
			this.<span class="apidocCodeKeywordSpan">initSettings</span>(config);
			return done(null, this.initServer(config));
		}.bind(this));
	}
}
...</pre></li>
    </ul>






















































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.404" id="apidoc.module.express-admin.404">module express-admin.404</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.404.get" id="apidoc.element.express-admin.404.get">
        function <span class="apidocSignatureSpan">express-admin.404.</span>get
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (req, res, next) {
	res.locals.partials = {
		content: &#x27;404&#x27;
	};

	next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.app" id="apidoc.module.express-admin.app">module express-admin.app</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.app.init" id="apidoc.element.express-admin.app.init">
        function <span class="apidocSignatureSpan">express-admin.app.</span>init
        <span class="apidocSignatureSpan">(config, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (config, done) {
		this.initDatabase(config, function (err) {
			if (err) return done(err);
			this.initSettings(config);
			return done(null, this.initServer(config));
		}.bind(this));
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		next();
	});

	// routes

	// init regexes
	var _routes = routes.<span class="apidocCodeKeywordSpan">init</span>(args.settings, args.custom);

	// register custom apps
	(function () {
		var have = false;
		for (var key in args.custom) {
			var _app = args.custom[key].app;
			if (_app &#x26;&#x26; _app.path &#x26;&#x26; fs.existsSync(_app.path)) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.app.initCommandLine" id="apidoc.element.express-admin.app.initCommandLine">
        function <span class="apidocSignatureSpan">express-admin.app.</span>initCommandLine
        <span class="apidocSignatureSpan">(args, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initCommandLine(args, cb) {
	if (!fs.existsSync(args.dpath)) {
		console.log(&#x27;Config directory path doesn\&#x27;t exists!&#x27;.red);
		process.exit();
	}
	if (project.exists(args.dpath)) return cb();
	// else
	cli.promptForData(function (err, data) {
		if (err) return cb(err);
		project.create(args.dpath, data, cb);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.app.initDatabase" id="apidoc.element.express-admin.app.initDatabase">
        function <span class="apidocSignatureSpan">express-admin.app.</span>initDatabase
        <span class="apidocSignatureSpan">(args, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initDatabase(args, done) {
	try {
		var client = new Client(args.config);
	} catch (err) {
		return done(err);
	}

	async.series([
		function (done) {
			var options = args.config.mysql||args.config.pg||args.config.sqlite;
			client.connect(options, function (err) {
				if (err) return done(err);
				var x = new Xsql({
					dialect: client.name,
					schema: client.config.schema});
				if (&#x27;function&#x27;===typeof qb) qb = qb(x);
				done();
			});
		},
		function (done) {
			var sql = qb.partials.tables(client.config.schema);
			client.query(sql, function (err, rows) {
				if (err) return done(err);
				if (!rows.length) return done(new Error(&#x27;Empty schema!&#x27;));
				done();
			});
		},
		function (done) {
			schema.getData(client, function (err, data) {
				if (err) return done(err);
				// write back the settings
				var fpath = path.join(args.dpath, &#x27;settings.json&#x27;),
					updated = settings.refresh(args.settings, data);
				fs.writeFileSync(fpath, JSON.stringify(updated, null, 4), &#x27;utf8&#x27;);

				args.settings = updated;
				done();
			});
		}
	], function (err) {
		if (err) return done(err);
		args.db = {client:client};
		done();
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

exports = module.exports = {
	initCommandLine: initCommandLine,
	initDatabase: initDatabase,
	initSettings: initSettings,
	initServer: initServer,
	init: function (config, done) {
		this.<span class="apidocCodeKeywordSpan">initDatabase</span>(config, function (err) {
			if (err) return done(err);
			this.initSettings(config);
			return done(null, this.initServer(config));
		}.bind(this));
	}
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.app.initServer" id="apidoc.element.express-admin.app.initServer">
        function <span class="apidocSignatureSpan">express-admin.app.</span>initServer
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initServer(args) {
	var r = require(&#x27;./routes&#x27;);

	// general settings
	var app = express()
		.set(&#x27;views&#x27;, path.resolve(__dirname, &#x27;./views&#x27;))
		.set(&#x27;view engine&#x27;, &#x27;html&#x27;)
		.engine(&#x27;html&#x27;, consolidate.hogan)

		.use(logger(&#x27;dev&#x27;))
		.use(bodyParser.json())
		.use(bodyParser.urlencoded({extended: true}))
		.use(multipart())

		.use(cookieParser())
		.use(args.session || session({name: &#x27;express-admin&#x27;, secret: &#x27;very secret - required&#x27;,
						saveUninitialized: true, resave: true}))
		.use(r.auth.status)// session middleware
		.use(csrf())

		.use(methodOverride())
		.use(serveStatic(path.join(__dirname, &#x27;public&#x27;)))
		.use(serveStatic((function () {
			var dpath = path.resolve(__dirname, &#x27;node_modules/express-admin-static&#x27;);
			if (!fs.existsSync(dpath)) {
				dpath = path.resolve(__dirname, &#x27;../express-admin-static&#x27;);
			}
			return dpath;
		})()));

	if (!args.debug) app.set(&#x27;view cache&#x27;, true);

	// register custom static local paths
	for (var key in args.custom) {
		var assets = args.custom[key].public;
		if (!assets || !assets.local || !assets.local.path ||
			!fs.existsSync(assets.local.path)) continue;
		app.use(serveStatic(assets.local.path));
	}

	// pass server wide variables
	app.use(function (req, res, next) {
		// app data
		res.locals._admin = args;

		// i18n
		var lang = req.cookies.lang || &#x27;en&#x27;;
		res.cookie(&#x27;lang&#x27;, lang, {path: &#x27;/&#x27;, maxAge: 900000000});
		moment.locale(lang == &#x27;cn&#x27; ? &#x27;zh-cn&#x27; : lang);

		// template vars
		res.locals.string = args.langs[lang];
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.get(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
	var _routes = routes.init(args.settings, args.custom);

	// register custom apps
	(function () {
		var have = false;
		for (var key in args.custom) {
			var _app = args.custom[key].app;
			if (_app &#x26;&#x26; _app.path &#x26;&#x26; fs.existsSync(_app.path)) {
				var view = require(_app.path);
				app.use(view);
				have = true;
			}
		}
		if (have &#x26;&#x26; _routes.custom) app.all(_routes.custom, r.auth.restrict, r.render.admin);
	}());

	// login/logout
	app.get(&#x27;/login&#x27;, r.login.get, r.render.admin);
	app.post(&#x27;/login&#x27;, r.auth.login);
	app.get(&#x27;/logout&#x27;, r.auth.logout);

	// editview
	app.get(_routes.editview, r.auth.restrict, r.editview.get, r.render.admin);
	app.post(_routes.editview, r.auth.restrict, r.editview.post, r.render.admin);

	// listview
	app.get(_routes.listview, r.auth.restrict, r.listview.get, r.render.admin);
	app.post(_routes.listview, r.auth.restrict, r.listview.post, r.render.admin);

	// mainview
	app.get(_routes.mainview, r.auth.restrict, r.mainview.get, r.render.admin);

	// not found
	app.all(&#x27;*&#x27;, r.auth.restrict, r.notfound.get, r.render.admin);

	return app;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	initDatabase: initDatabase,
	initSettings: initSettings,
	initServer: initServer,
	init: function (config, done) {
		this.initDatabase(config, function (err) {
			if (err) return done(err);
			this.initSettings(config);
			return done(null, this.<span class="apidocCodeKeywordSpan">initServer</span>(config));
		}.bind(this));
	}
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.app.initSettings" id="apidoc.element.express-admin.app.initSettings">
        function <span class="apidocSignatureSpan">express-admin.app.</span>initSettings
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function initSettings(args) {
	// route variables

	// upload
	var upload = args.config.app.upload || path.join(__dirname, &#x27;public/upload&#x27;);
	args.config.app.upload = upload;
	if (!fs.existsSync(upload)) fs.mkdirSync(upload);

	// languages
	args.langs = (function () {
		var dpath = path.join(__dirname, &#x27;config/lang&#x27;),
			files = fs.readdirSync(dpath),
			langs = {};
		for (var i=0; i &#x3c; files.length; i++) {
			var name = files[i].replace(path.extname(files[i]), &#x27;&#x27;);
			langs[name] = require(path.join(dpath, files[i]));
		}
		return langs;
	}());

	// slug to table map
	args.slugs = (function () {
		var slugs = {};
		for (var key in args.settings) {
			slugs[args.settings[key].slug] = key;
		}
		return slugs;
	}());

	// debug
	args.debug = args.config.app.debug || (cli.dev ? true : false);
	// if (!args.debug) console.warn = function(){};
	// log
	args.log = args.config.app.log || (cli.log ? true : false);

	// events
	for (var key in args.custom) {
		var fpath = args.custom[key].events;
		if (fpath) break;
	}
	var events = fpath ? require(fpath) : {};
	if (!events.hasOwnProperty(&#x27;preSave&#x27;))
		events.preSave = function (req, res, args, next) {next()};
	if (!events.hasOwnProperty(&#x27;postSave&#x27;))
		events.postSave = function (req, res, args, next) {next()};
	if (!events.hasOwnProperty(&#x27;preList&#x27;))
		events.preList = function (req, res, args, next) {next()};
	args.events = events;


	// template variables

	// root
	if (args.config.app.root) {
		var root = args.config.app.root;
		if (/.*\/$/.test(root)) args.config.app.root = root.slice(0,-1);
	} else {
		args.config.app.root = &#x27;&#x27;;
	}

	// layouts/themes/languages
	args.layouts = args.config.app.layouts;
	args.themes = args.config.app.themes
		? {theme: require(path.join(__dirname, &#x27;config/themes&#x27;))} : null;

	args.languages = (function () {
		if (!args.config.app.languages) return null;
		var langs = [];
		for (var key in args.langs) {
			langs.push({key: key, name: args.langs[key].name});
		}
		return {language: langs};
	}());

	// static
	args.libs = dcopy(require(path.join(__dirname, &#x27;config/libs&#x27;)));
	args.libs.external = {css: [], js: []};
	for (var key in args.custom) {
		var assets = args.custom[key].public;
		if (!assets) continue;
		if (assets.local) {
			args.libs.js = args.libs.js.concat(assets.local.js||[]);
			args.libs.css = args.libs.css.concat(assets.local.css||[]);
		}
		if (assets.external) {
			args.libs.external.js = args.libs.external.js.concat(assets.external.js||[]);
			args.libs.external.css = args.libs.external.css.concat(assets.external.css||[]);
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	initCommandLine: initCommandLine,
	initDatabase: initDatabase,
	initSettings: initSettings,
	initServer: initServer,
	init: function (config, done) {
		this.initDatabase(config, function (err) {
			if (err) return done(err);
			this.<span class="apidocCodeKeywordSpan">initSettings</span>(config);
			return done(null, this.initServer(config));
		}.bind(this));
	}
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.auth" id="apidoc.module.express-admin.auth">module express-admin.auth</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.auth.login" id="apidoc.element.express-admin.auth.login">
        function <span class="apidocSignatureSpan">express-admin.auth.</span>login
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">login = function (req, res) {
	// query the db for the given username
	var user = res.locals._admin.users[req.body.username];
	if (!user) {
		req.session.error = res.locals.string[&#x27;find-user&#x27;];
		req.session.username = req.body.username;
		res.redirect(res.locals.root+&#x27;/login&#x27;);
		return;
	}

	// apply the same algorithm to the POSTed password, applying
	// the hash against the pass / salt, if there is a match we
	// found the user
	pwd.hash(req.body.password, user.salt, function (err, hash) {
		if (hash !== user.hash) {
			req.session.error = res.locals.string[&#x27;invalid-password&#x27;];
			req.session.username = req.body.username;
			res.redirect(res.locals.root+&#x27;/login&#x27;);
			return;
		}

		// Regenerate session when signing in
		// to prevent fixation
		req.session.regenerate(function (err) {
			// Store the user&#x27;s primary key
			// in the session store to be retrieved,
			// or in this case the entire user object
			req.session.user = user;
			res.redirect(res.locals.root+&#x27;/&#x27;);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.auth.logout" id="apidoc.element.express-admin.auth.logout">
        function <span class="apidocSignatureSpan">express-admin.auth.</span>logout
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logout = function (req, res) {
	// destroy the user&#x27;s session to log them out
	// will be re-created next request
	req.session.destroy(function () {
		// successfully logged out
		res.redirect(res.locals.root+&#x27;/login&#x27;);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.auth.restrict" id="apidoc.element.express-admin.auth.restrict">
        function <span class="apidocSignatureSpan">express-admin.auth.</span>restrict
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">restrict = function (req, res, next) {
	if (res.locals._admin.debug) return next();

	if (req.session.user) return next();
	req.session.error = res.locals.string[&#x27;access-denied&#x27;];
	res.redirect(res.locals.root+&#x27;/login&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.auth.status" id="apidoc.element.express-admin.auth.status">
        function <span class="apidocSignatureSpan">express-admin.auth.</span>status
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">status = function (req, res, next) {
	res.locals.show = {
		error: req.session.error,
		success: req.session.success
	};
	res.locals.username = req.session.username;
	delete req.session.error;
	delete req.session.success;
	delete req.session.username;
	next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.cli" id="apidoc.module.express-admin.cli">module express-admin.cli</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.cli.Command" id="apidoc.element.express-admin.cli.Command">
        function <span class="apidocSignatureSpan">express-admin.cli.</span>Command
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command(name) {
  this.commands = [];
  this.options = [];
  this._execs = [];
  this._args = [];
  this._name = name;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.cli.Option" id="apidoc.element.express-admin.cli.Option">
        function <span class="apidocSignatureSpan">express-admin.cli.</span>Option
        <span class="apidocSignatureSpan">(flags, description)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Option(flags, description) {
  this.flags = flags;
  this.required = ~flags.indexOf(&#x27;&#x3c;&#x27;);
  this.optional = ~flags.indexOf(&#x27;[&#x27;);
  this.bool = !~flags.indexOf(&#x27;-no-&#x27;);
  flags = flags.split(/[ ,|]+/);
  if (flags.length &#x3e; 1 &#x26;&#x26; !/^[[&#x3c;]/.test(flags[1])) this.short = flags.shift();
  this.long = flags.shift();
  this.description = description || &#x27;&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.cli.getConfigPath" id="apidoc.element.express-admin.cli.getConfigPath">
        function <span class="apidocSignatureSpan">express-admin.cli.</span>getConfigPath
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConfigPath = function () {
	var dpath = null;
	switch (true) {
		case &#x27;string&#x27; == typeof this.dev:
			dpath = this.dev;
			break;
		case &#x27;string&#x27; == typeof this.log:
			dpath = this.log;
			break;
		case this.args.length &#x3e; 0:
			dpath = this.args[0];
			break;
		default:
			dpath = &#x27;&#x27;;
	}
	return dpath;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	return app;
}


// start only if this module is executed from the command line
if (require.main === module) {
	var args = {
		dpath: path.resolve(cli.<span class="apidocCodeKeywordSpan">getConfigPath</span>())
	}
	initCommandLine(args, function (err) {
		if (err) return console.log(err.message.red);

		args.config = require(path.join(args.dpath, &#x27;config.json&#x27;));
		args.settings = require(path.join(args.dpath, &#x27;settings.json&#x27;));
		args.custom = require(path.join(args.dpath, &#x27;custom.json&#x27;));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.cli.promptForAdmin" id="apidoc.element.express-admin.cli.promptForAdmin">
        function <span class="apidocSignatureSpan">express-admin.cli.</span>promptForAdmin
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">promptForAdmin = function (cb) {
	var self = this;
	function user (cb) {
		self.prompt(&#x27;Admin user: &#x27;, function (input) {
			if (input == &#x27;&#x27;) {
				console.log(&#x27;Administrator user name is required!&#x27;.red);
				return user(cb);
			}
			cb(input);
		});
	}

	function pass (cb) {
		self.prompt(&#x27;Admin password: &#x27;, function (input) {
			if (!validate.adminPassword(input)) {
				console.log((
					&#x27;Must contains at least:\n&#x27;+
					&#x27;2 lower case letters, 2 upper case letters &#x27;+
					&#x27;and 2 digits&#x27;).red);
				return pass(cb);
			}
			cb(input);
		});
	}
	user(function (name) {
		pass(function (password) {
			var data = { user: { name: name, pass: password } };
			cb(null, data);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.cli.promptForData" id="apidoc.element.express-admin.cli.promptForData">
        function <span class="apidocSignatureSpan">express-admin.cli.</span>promptForData
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">promptForData = function (cb) {
	var func = [&#x27;promptForDatabase&#x27;, &#x27;promptForServer&#x27;, &#x27;promptForAdmin&#x27;],
		result = {},
		self = this;
	function loop (index) {
		if (index == func.length) return cb(null, result);
		self[func[index]](function (err, data) {
			if (err) return cb(err);
			var key = Object.keys(data)[0];
			result[key] = data[key];
			loop(++index);
		})
	}
	loop(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function initCommandLine (args, cb) {
	if (!fs.existsSync(args.dpath)) {
		console.log(&#x27;Config directory path doesn\&#x27;t exists!&#x27;.red);
		process.exit();
	}
	if (project.exists(args.dpath)) return cb();
	// else
	cli.<span class="apidocCodeKeywordSpan">promptForData</span>(function (err, data) {
		if (err) return cb(err);
		project.create(args.dpath, data, cb);
	});
}

// sets args.db.client
// updates args.settings
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.cli.promptForDatabase" id="apidoc.element.express-admin.cli.promptForDatabase">
        function <span class="apidocSignatureSpan">express-admin.cli.</span>promptForDatabase
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">promptForDatabase = function (cb) {
	var text = [&#x27;Database type: &#x27;, &#x27;Database name: &#x27;, &#x27;Database user: &#x27;, &#x27;Database password: &#x27;],
		keys = [&#x27;type&#x27;, &#x27;database&#x27;, &#x27;user&#x27;, &#x27;password&#x27;],
		data = {},
		options = {},
		self = this;
	function prompt (text, cb) {
		self.prompt(text, function (input) {
			if (text == &#x27;Database type: &#x27;) {
				if (input == &#x27;&#x27;) {
					return cb(input == &#x27;&#x27; ? &#x27;mysql&#x27; : input);
				}
				if (!/(mysql|pg|sqlite)/.test(input)) {
					console.log(&#x27;Valid database type is: mysql, sqlite or pg!&#x27;.red);
					return prompt(text, cb);
				}
			}
			if (text == &#x27;Database schema: &#x27;) {
				return cb(input == &#x27;&#x27; ? &#x27;public&#x27; : input);
			}
			if (input == &#x27;&#x27;) {
				console.log(&#x27;Database credentials are required!&#x27;.red);
				return prompt(text, cb);
			}
			cb(input);
		});
	}
	function loop (i) {
		if (i == keys.length) return cb(null, data);
		prompt(text[i], function (input) {
			if (text[i] == &#x27;Database type: &#x27;) {
				options = data[input] = {};
				if (input == &#x27;sqlite&#x27;) {
					text.splice(2,2);
					keys.splice(2,2);
					text[1] = &#x27;Database file: &#x27;;
				} else if (input == &#x27;pg&#x27;) {
					text.splice(4,0,&#x27;Database schema: &#x27;);
					keys.splice(4,0,&#x27;schema&#x27;);
				}
			} else {
				options[keys[i]] = input;
			}
			loop(++i);
		});
	}
	loop(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.cli.promptForServer" id="apidoc.element.express-admin.cli.promptForServer">
        function <span class="apidocSignatureSpan">express-admin.cli.</span>promptForServer
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">promptForServer = function (cb) {
	var data = { server: {} };
	this.prompt(&#x27;Server port: &#x27;, Number, function (input) {
		data.server.port = (input == 0) ? 3000 : input;
		cb(null, data);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.editview" id="apidoc.module.express-admin.editview">module express-admin.editview</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.editview.get" id="apidoc.element.express-admin.editview.get">
        function <span class="apidocSignatureSpan">express-admin.editview.</span>get
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (req, res, next) {
	var args = getArgs(req, res);

	editview.getTypes(args, function (err, data) {
		if (err) return next(err);
		render(req, res, next, data, args);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.editview.post" id="apidoc.element.express-admin.editview.post">
        function <span class="apidocSignatureSpan">express-admin.editview.</span>post
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">post = function (req, res, next) {
	var args = getArgs(req, res),
		events = res.locals._admin.events;

	editview.getTypes(args, function (err, data) {
		if (err) return next(err);

		var view = req.body.view,
			table = Object.keys(view)[0];

		if (action(req, &#x27;remove&#x27;)) {
			// should be based on constraints
			args.action = &#x27;remove&#x27;;

		} else if ({}.hasOwnProperty.call(view[table].records[0], &#x27;insert&#x27;)) {
			if (args.error &#x26;&#x26; !args.debug)
				return render(req, res, next, data, args);
			args.action = &#x27;insert&#x27;;

		} else {
			if (args.error &#x26;&#x26; !args.debug)
				return render(req, res, next, data, args);
			args.action = &#x27;update&#x27;;
		}

		async.series([
			events.preSave.bind(events, req, res, args),

			database.update.bind(database, args),

			events.postSave.bind(events, req, res, args)

		], function (err) {
			if (err) {
				req.session.error = err.message;
				res.redirect(res.locals.root+&#x27;/&#x27;+args.slug+page(req, args));
				return;
			}

			req.session.success = true;

			// based on clicked button
			if (action(req, &#x27;remove&#x27;)) {
				// the message should be different for delete
				res.redirect(res.locals.root+&#x27;/&#x27;+args.slug+page(req, args));
			}
			else if (action(req, &#x27;save&#x27;)) {
				res.redirect(res.locals.root+&#x27;/&#x27;+args.slug+page(req, args));
			}
			else if (action(req, &#x27;another&#x27;)) {
				res.redirect(res.locals.root+&#x27;/&#x27;+args.slug+&#x27;/add&#x27;);
			}
			else if (action(req, &#x27;continue&#x27;)) {
				if (args.debug) return render(req, res, next, data, args);
				res.redirect(res.locals.root+&#x27;/&#x27;+args.slug+&#x27;/&#x27;+args.id.join());
			}
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}
		}
		if (have &#x26;&#x26; _routes.custom) app.all(_routes.custom, r.auth.restrict, r.render.admin);
	}());

	// login/logout
	app.get(&#x27;/login&#x27;, r.login.get, r.render.admin);
	app.<span class="apidocCodeKeywordSpan">post</span>(&#x27;/login&#x27;, r.auth.login);
	app.get(&#x27;/logout&#x27;, r.auth.logout);

	// editview
	app.get(_routes.editview, r.auth.restrict, r.editview.get, r.render.admin);
	app.post(_routes.editview, r.auth.restrict, r.editview.post, r.render.admin);

	// listview
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.filter" id="apidoc.module.express-admin.filter">module express-admin.filter</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.filter.getColumns" id="apidoc.element.express-admin.filter.getColumns">
        function <span class="apidocSignatureSpan">express-admin.filter.</span>getColumns
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getColumns = function (args) {
	var filter = [];
	for (var i=0; i &#x3c; args.config.columns.length; i++) {
		if (!args.config.listview.filter) continue;
		for (var j=0; j &#x3c; args.config.listview.filter.length; j++) {
			if (args.config.columns[i].name == args.config.listview.filter[j]) {
				var column = dcopy(args.config.columns[i]);
				column.key = &#x27;filter[&#x27;+column.name+&#x27;]&#x27;;
				filter.push(column);
			}
		}
	}
	return filter;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		},
		function (done) {
			data.pagination.get(args, function (err, pager) {
				if (err) return done(err);
				// always should be in front of filter.getColumns
				// as it may reduce args.config.columns
				results.order = filter.getOrderColumns(req, args);
				args.config.columns = filter.<span class="apidocCodeKeywordSpan">getColumns</span>(args);
				results.pager = pager;
				done();
			});
		},
		function (done) {
			data.otm.get(args, function (err) {
				if (err) return done(err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.filter.getOrderColumns" id="apidoc.element.express-admin.filter.getOrderColumns">
        function <span class="apidocSignatureSpan">express-admin.filter.</span>getOrderColumns
        <span class="apidocSignatureSpan">(req, args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getOrderColumns = function (req, args) {
	var order = [];
	for (var i=0; i &#x3c; args.config.columns.length; i++) {
		var column = args.config.columns[i];
		if (!column.listview.show) continue;
		if (column.name == args.filter.order) {
			column = dcopy(column);
			column.selected = true;
		}
		order.push(column);
	}
	return order;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			});
		},
		function (done) {
			data.pagination.get(args, function (err, pager) {
				if (err) return done(err);
				// always should be in front of filter.getColumns
				// as it may reduce args.config.columns
				results.order = filter.<span class="apidocCodeKeywordSpan">getOrderColumns</span>(req, args);
				args.config.columns = filter.getColumns(args);
				results.pager = pager;
				done();
			});
		},
		function (done) {
			data.otm.get(args, function (err) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.filter.prepareSession" id="apidoc.element.express-admin.filter.prepareSession">
        function <span class="apidocSignatureSpan">express-admin.filter.</span>prepareSession
        <span class="apidocSignatureSpan">(req, args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">prepareSession = function (req, args) {
	if (!req.session.filter) req.session.filter = {};
	var filter = req.session.filter;

	if ((req.method == &#x27;GET&#x27; &#x26;&#x26; !filter.hasOwnProperty(args.name))
	|| (req.method == &#x27;POST&#x27; &#x26;&#x26; req.body.action.hasOwnProperty(&#x27;clear&#x27;))) {
		filter[args.name] = {
			columns: {},
			order: &#x27;&#x27;,
			direction: &#x27;&#x27;,
			show: false,
			or: false
		};
	}
	else if (req.method == &#x27;POST&#x27; &#x26;&#x26; req.body.action.hasOwnProperty(&#x27;filter&#x27;)) {
		filter[args.name] = {
			columns: req.body.filter||{},
			order: req.body.order,
			direction: req.body.direction,
			show: true,
			or: req.body.or
		};
	}

	filter[args.name].page = args.page;

	return filter[args.name];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	_data(req, res, next);
}

function _data (req, res, next) {
	var args = getArgs(req, res),
		events = res.locals._admin.events;

	args.filter = filter.<span class="apidocCodeKeywordSpan">prepareSession</span>(req, args);
	qb.lst.select(args);

	var results = {};
	async.series([
		events.preList.bind(events, req, res, args),
		function (done) {
			data.list.get(args, function (err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.form" id="apidoc.module.express-admin.form">module express-admin.form</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.form.setActiveMultiple" id="apidoc.element.express-admin.form.setActiveMultiple">
        function <span class="apidocSignatureSpan">express-admin.form.</span>setActiveMultiple
        <span class="apidocSignatureSpan">(column, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setActiveMultiple = function (column, value) {
	if (!column.value) return value;
	var rows = column.value;
	for (var i=0; i &#x3c; rows.length; i++) {
		var pk = rows[i][&#x27;__pk&#x27;];
		value = (value instanceof Array) ? value : [value];
		for (var j=0; j &#x3c; value.length; j++) {
			if (pk == value[j]) {
				rows[i].selected = true;
				break;
			}
		}
	}
	return rows;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	else if (column.control.binary) {
		return value ? &#x27;data:image/jpeg;base64,&#x27;+value.toString(&#x27;base64&#x27;) : value;
	}

	else if (column.control.multiple) {
		return this.<span class="apidocCodeKeywordSpan">setActiveMultiple</span>(column, value);
	}

	else if (column.control.select) {
		return this.setActiveSingle(column, value);
	}

	else if (column.control.radio) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.form.setActiveRadio" id="apidoc.element.express-admin.form.setActiveRadio">
        function <span class="apidocSignatureSpan">express-admin.form.</span>setActiveRadio
        <span class="apidocSignatureSpan">(column, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setActiveRadio = function (column, value) {
	if (value == 1)
		column.value[0].active = true;
	
	else if (value == 0)
		column.value[1].active = true;
	
	return column.value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	else if (column.control.select) {
		return this.setActiveSingle(column, value);
	}

	else if (column.control.radio) {
		return this.<span class="apidocCodeKeywordSpan">setActiveRadio</span>(column, value);
	}

	else {
		return value;
	}
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.form.setActiveSingle" id="apidoc.element.express-admin.form.setActiveSingle">
        function <span class="apidocSignatureSpan">express-admin.form.</span>setActiveSingle
        <span class="apidocSignatureSpan">(column, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setActiveSingle = function (column, value) {
	if (!column.value) return value;
	var rows = column.value;
	for (var i=0; i &#x3c; rows.length; i++) {
		if (rows[i][&#x27;__pk&#x27;] == value) {
			rows[i].selected = true;
			return rows;
		}
	}
	return rows;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	else if (column.control.multiple) {
		return this.setActiveMultiple(column, value);
	}

	else if (column.control.select) {
		return this.<span class="apidocCodeKeywordSpan">setActiveSingle</span>(column, value);
	}

	else if (column.control.radio) {
		return this.setActiveRadio(column, value);
	}

	else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.form.value" id="apidoc.element.express-admin.form.value">
        function <span class="apidocSignatureSpan">express-admin.form.</span>value
        <span class="apidocSignatureSpan">(column, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">value = function (column, value) {
	if (value == &#x27;&#x27; &#x26;&#x26; column.defaultValue) {
		value = column.defaultValue;
	}

	if (column.control.date) {
		if (!value) return null;
		if (moment(value).isValid())
			return moment(value).format(&#x27;YYYY-MM-DD&#x27;);
		return value;
	}

	else if (column.control.datetime) {
		if (!value) return null;
		if (moment(value).isValid())
			return moment(value).format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;);
		return value;
	}

	else if (column.control.binary) {
		return value ? &#x27;data:image/jpeg;base64,&#x27;+value.toString(&#x27;base64&#x27;) : value;
	}

	else if (column.control.multiple) {
		return this.setActiveMultiple(column, value);
	}

	else if (column.control.select) {
		return this.setActiveSingle(column, value);
	}

	else if (column.control.radio) {
		return this.setActiveRadio(column, value);
	}

	else {
		return value;
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

function render (req, res, args, ddata, pager, order, next) {
	// set filter active items
	for (var i=0; i &#x3c; args.config.columns.length; i++) {
		var column = args.config.columns[i],
			value = args.filter.columns[column.name];
		column.defaultValue = null;
		column.value = format.form.<span class="apidocCodeKeywordSpan">value</span>(column, value);
	}

	res.locals.view = {
		name: args.config.table.verbose,
		slug: args.slug,
		error: res.locals.error,
		table: !args.config.table.view
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.list" id="apidoc.module.express-admin.list">module express-admin.list</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.list.get" id="apidoc.element.express-admin.list.get">
        function <span class="apidocSignatureSpan">express-admin.list.</span>get
        <span class="apidocSignatureSpan">(args, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (args, done) {
	var columns = args.config.columns;

	var visible = [],
		names = [];
	for (var i=0; i &#x3c; columns.length; i++) {
		if (!columns[i].listview.show) continue;
		visible.push(columns[i]);
		names.push(columns[i].verbose);
	}
	columns = visible;
	
	qb.lst.create(args);

	args.db.client.query(args.query, function (err, rows) {
		if (err) return done(err);
		var idx = args.config.table.view ? 0 : 1;

		var records = [];
		for (var i=0; i &#x3c; rows.length; i++) {
			var pk = idx ? {
				id: rows[i][&#x27;__pk&#x27;],
				text: rows[i][columns[0].name]
			} : null;
			var values = [];
			for (var j=idx; j &#x3c; columns.length; j++) {
				var value = rows[i][columns[j].name];
				value = format.list.value(columns[j], value);
				if (columns[j].manyToMany &#x26;&#x26; value) value = {mtm: value.split(&#x27;,&#x27;)}
				values.push(value);
			}
			records.push({pk: pk, values: values});
		}
		done(null, {columns: names, records: records});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.listview" id="apidoc.module.express-admin.listview">module express-admin.listview</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.listview.get" id="apidoc.element.express-admin.listview.get">
        function <span class="apidocSignatureSpan">express-admin.listview.</span>get
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (req, res, next) {
	_data(req, res, next);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.listview.post" id="apidoc.element.express-admin.listview.post">
        function <span class="apidocSignatureSpan">express-admin.listview.</span>post
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">post = function (req, res, next) {
	_data(req, res, next);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}
		}
		if (have &#x26;&#x26; _routes.custom) app.all(_routes.custom, r.auth.restrict, r.render.admin);
	}());

	// login/logout
	app.get(&#x27;/login&#x27;, r.login.get, r.render.admin);
	app.<span class="apidocCodeKeywordSpan">post</span>(&#x27;/login&#x27;, r.auth.login);
	app.get(&#x27;/logout&#x27;, r.auth.logout);

	// editview
	app.get(_routes.editview, r.auth.restrict, r.editview.get, r.render.admin);
	app.post(_routes.editview, r.auth.restrict, r.editview.post, r.render.admin);

	// listview
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.login" id="apidoc.module.express-admin.login">module express-admin.login</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.login.get" id="apidoc.element.express-admin.login.get">
        function <span class="apidocSignatureSpan">express-admin.login.</span>get
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (req, res, next) {
	
	res.locals.partials = {
		content: &#x27;login&#x27;
	};

	next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.mainview" id="apidoc.module.express-admin.mainview">module express-admin.mainview</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.mainview.get" id="apidoc.element.express-admin.mainview.get">
        function <span class="apidocSignatureSpan">express-admin.mainview.</span>get
        <span class="apidocSignatureSpan">(req, res, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (req, res, next) {
	var settings = res.locals._admin.settings,
		custom = res.locals._admin.custom;

	var tables = [];
	for (var key in settings) {
		var item = settings[key];
		if (!item.mainview.show || !item.table.pk || item.table.view) continue;
		tables.push({slug: item.slug, name: item.table.verbose});
	}

	var views = [];
	for (var key in settings) {
		var item = settings[key];
		if (!item.mainview.show || !item.table.view) continue;
		views.push({slug: item.slug, name: item.table.verbose});
	}

	var customs = [];
	for (var key in custom) {
		var item = custom[key].app;
		if (!item || !item.mainview || !item.mainview.show) continue;
		customs.push({slug: item.slug, name: item.verbose});
	}

	res.locals.tables = !tables.length ? null : {items: tables};
	res.locals.views = !views.length ? null : {items: views};
	res.locals.custom = !customs.length ? null : {items: customs};
	
	res.locals.partials = {
		content:  &#x27;mainview&#x27;
	};

	next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.mtm" id="apidoc.module.express-admin.mtm">module express-admin.mtm</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.mtm.get" id="apidoc.element.express-admin.mtm.get">
        function <span class="apidocSignatureSpan">express-admin.mtm.</span>get
        <span class="apidocSignatureSpan">(args, rows, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (args, rows, done) {
	async.each(rows, function (row, done) {
		loopColumns(args, row, done);
	}, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.otm" id="apidoc.module.express-admin.otm">module express-admin.otm</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.otm._getData" id="apidoc.element.express-admin.otm._getData">
        function <span class="apidocSignatureSpan">express-admin.otm.</span>_getData
        <span class="apidocSignatureSpan">(args, ref, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getData(args, ref, done) {
	var str = qb.otm.select(args, ref);
	args.db.client.query(str, function (err, rows) {
		if (err) return done(err);
		done(null, rows);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.otm.get" id="apidoc.element.express-admin.otm.get">
        function <span class="apidocSignatureSpan">express-admin.otm.</span>get
        <span class="apidocSignatureSpan">(args, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (args, done) {
	async.each(args.config.columns, function (column, done) {
		if ((!column.oneToMany &#x26;&#x26; !column.manyToMany) || !column.control.select)
			return done();
		var ref = column.oneToMany ? column.oneToMany : column.manyToMany.ref;
		getData(args, ref, function (err, rows) {
			if (err) return done(err);
			column.value = rows;
			done();
		});
	}, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.pagination" id="apidoc.module.express-admin.pagination">module express-admin.pagination</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.pagination.get" id="apidoc.element.express-admin.pagination.get">
        function <span class="apidocSignatureSpan">express-admin.pagination.</span>get
        <span class="apidocSignatureSpan">(args, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (args, done) {
	var str = qb.lst.pagination(args);
	args.db.client.query(str, function (err, rows) {
		if (err) return done(err);
		var total = parseInt(rows[0].count),
			rows = args.config.listview.page,
			page = parseInt(args.page || 1);
		done(null, pagination({page: page, links: 9, rows: rows, total: total}));
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.project" id="apidoc.module.express-admin.project">module express-admin.project</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.project.create" id="apidoc.element.express-admin.project.create">
        function <span class="apidocSignatureSpan">express-admin.project.</span>create
        <span class="apidocSignatureSpan">(dpath, data, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (dpath, data, cb) {
	// user
	var json = {};
	user.create(data.user.name, data.user.pass, true, function (err, usr) {
		if (err) return cb(err);
		json[usr.name] = usr;
		fs.writeFileSync(path.join(dpath, &#x27;users.json&#x27;), JSON.stringify(json, null, 4), &#x27;utf8&#x27;);
		cb();
	});
	delete data.user;
	
	// config
	data.app = {
		layouts: true,
		themes: true,
		languages: true
	};
	fs.writeFileSync(path.join(dpath, &#x27;config.json&#x27;), JSON.stringify(data, null, 4), &#x27;utf8&#x27;);
	// custom
	fs.writeFileSync(path.join(dpath, &#x27;custom.json&#x27;), JSON.stringify({}, null, 4), &#x27;utf8&#x27;);
	// settings
	fs.writeFileSync(path.join(dpath, &#x27;settings.json&#x27;), JSON.stringify({}, null, 4), &#x27;utf8&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		console.log(&#x27;Config directory path doesn\&#x27;t exists!&#x27;.red);
		process.exit();
	}
	if (project.exists(args.dpath)) return cb();
	// else
	cli.promptForData(function (err, data) {
		if (err) return cb(err);
		project.<span class="apidocCodeKeywordSpan">create</span>(args.dpath, data, cb);
	});
}

// sets args.db.client
// updates args.settings
function initDatabase (args, done) {
	try {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.project.exists" id="apidoc.element.express-admin.project.exists">
        function <span class="apidocSignatureSpan">express-admin.project.</span>exists
        <span class="apidocSignatureSpan">(dpath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exists = function (dpath) {
	return (
		fs.existsSync(path.join(dpath, &#x27;config.json&#x27;)) &#x26;&#x26;
		fs.existsSync(path.join(dpath, &#x27;custom.json&#x27;)) &#x26;&#x26;
		fs.existsSync(path.join(dpath, &#x27;settings.json&#x27;)) &#x26;&#x26;
		fs.existsSync(path.join(dpath, &#x27;users.json&#x27;))
	)
	? true
	: false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// creates project&#x27;s config files
function initCommandLine (args, cb) {
	if (!fs.existsSync(args.dpath)) {
		console.log(&#x27;Config directory path doesn\&#x27;t exists!&#x27;.red);
		process.exit();
	}
	if (project.<span class="apidocCodeKeywordSpan">exists</span>(args.dpath)) return cb();
	// else
	cli.promptForData(function (err, data) {
		if (err) return cb(err);
		project.create(args.dpath, data, cb);
	});
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.render" id="apidoc.module.express-admin.render">module express-admin.render</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.render.admin" id="apidoc.element.express-admin.render.admin">
        function <span class="apidocSignatureSpan">express-admin.render.</span>admin
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">admin = function (req, res) {
	
	res.locals.partials.header = &#x27;header&#x27;;
	res.locals.partials.breadcrumbs = &#x27;breadcrumbs&#x27;;
	res.locals.partials.theme = &#x27;js/theme&#x27;;
	res.locals.partials.layout = &#x27;js/layout&#x27;;

	res.render(&#x27;base&#x27;, {
		
		user: req.session.user,
		csrf: req.csrfToken(),

		url: {
			home: &#x27;/&#x27;
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.routes" id="apidoc.module.express-admin.routes">module express-admin.routes</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.routes.init" id="apidoc.element.express-admin.routes.init">
        function <span class="apidocSignatureSpan">express-admin.routes.</span>init
        <span class="apidocSignatureSpan">(tables, custom)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (tables, custom) {
	regex.tables = getTableSlugs(tables)||/.*/i;
	regex.custom = getTableSlugs(custom);
	return {
		editview: joinRegex(&#x27;tables&#x27;, &#x27;edit&#x27;, &#x27;$&#x27;),
		listview: joinRegex(&#x27;tables&#x27;, &#x27;list&#x27;, &#x27;$&#x27;),
		custom:   regex.custom ? joinRegex(&#x27;custom&#x27;, &#x27;anything&#x27;, &#x27;$&#x27;) : null,
		mainview: regex.home,
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		next();
	});

	// routes

	// init regexes
	var _routes = routes.<span class="apidocCodeKeywordSpan">init</span>(args.settings, args.custom);

	// register custom apps
	(function () {
		var have = false;
		for (var key in args.custom) {
			var _app = args.custom[key].app;
			if (_app &#x26;&#x26; _app.path &#x26;&#x26; fs.existsSync(_app.path)) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.schema" id="apidoc.module.express-admin.schema">module express-admin.schema</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.schema.getColumns" id="apidoc.element.express-admin.schema.getColumns">
        function <span class="apidocSignatureSpan">express-admin.schema.</span>getColumns
        <span class="apidocSignatureSpan">(client, table, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getColumns = function (client, table, done) {
	var sql = qb.partials.columns(table, client.config.schema);
	client.query(sql, function (err, columns) {
		if (err) return done(err);
		done(null, client.getColumnsInfo(columns));
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		},
		function (done) {
			data.pagination.get(args, function (err, pager) {
				if (err) return done(err);
				// always should be in front of filter.getColumns
				// as it may reduce args.config.columns
				results.order = filter.getOrderColumns(req, args);
				args.config.columns = filter.<span class="apidocCodeKeywordSpan">getColumns</span>(args);
				results.pager = pager;
				done();
			});
		},
		function (done) {
			data.otm.get(args, function (err) {
				if (err) return done(err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.schema.getData" id="apidoc.element.express-admin.schema.getData">
        function <span class="apidocSignatureSpan">express-admin.schema.</span>getData
        <span class="apidocSignatureSpan">(client, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getData = function (client, done) {
	var result = {};
	async.each([&#x27;tables&#x27;, &#x27;views&#x27;], function (type, done) {
		exports.getTables(client, type, function (err, tables) {
			if (err) return done(err);
			async.each(tables, function (table, done) {
				exports.getColumns(client, table, function (err, info) {
					if (err) return done(err);
					result[table] = info;
					if (type == &#x27;views&#x27;) result[table].__view = true;
					done();
				});
			}, done);
		});
	}, function (err) {
		done(err, result);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			client.query(sql, function (err, rows) {
				if (err) return done(err);
				if (!rows.length) return done(new Error(&#x27;Empty schema!&#x27;));
				done();
			});
		},
		function (done) {
			schema.<span class="apidocCodeKeywordSpan">getData</span>(client, function (err, data) {
				if (err) return done(err);
				// write back the settings
				var fpath = path.join(args.dpath, &#x27;settings.json&#x27;),
					updated = settings.refresh(args.settings, data);
				fs.writeFileSync(fpath, JSON.stringify(updated, null, 4), &#x27;utf8&#x27;);

				args.settings = updated;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.schema.getTables" id="apidoc.element.express-admin.schema.getTables">
        function <span class="apidocSignatureSpan">express-admin.schema.</span>getTables
        <span class="apidocSignatureSpan">(client, type, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getTables = function (client, type, done) {
	var sql = qb.partials[type](client.config.schema);
	client.query(sql, function (err, rows) {
		if (err) return done(err);
		done(null, rows.map(function (row) {
			return row[Object.keys(row)[0]];
		}));
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	});
}

// get creation information for each column in each table and view
exports.getData = function (client, done) {
	var result = {};
	async.each([&#x27;tables&#x27;, &#x27;views&#x27;], function (type, done) {
		exports.<span class="apidocCodeKeywordSpan">getTables</span>(client, type, function (err, tables) {
			if (err) return done(err);
			async.each(tables, function (table, done) {
				exports.getColumns(client, table, function (err, info) {
					if (err) return done(err);
					result[table] = info;
					if (type == &#x27;views&#x27;) result[table].__view = true;
					done();
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.settings" id="apidoc.module.express-admin.settings">module express-admin.settings</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.settings.refresh" id="apidoc.element.express-admin.settings.refresh">
        function <span class="apidocSignatureSpan">express-admin.settings.</span>refresh
        <span class="apidocSignatureSpan">(settings, info)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">refresh = function (settings, info) {
	for (var table in info) {
		var view  = info[table].__view;
		delete info[table].__view;

		var columns = info[table],
			pk = primaryKey(columns);

		if (settings[table] === undefined) {
			settings[table] = createTable(table, pk, view);
		}

		for (var name in columns) {
			if (exists(settings[table].columns, name)) continue;

			settings[table].columns.push(createColumn(name, columns[name]));
		}
	}
	return settings;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			});
		},
		function (done) {
			schema.getData(client, function (err, data) {
				if (err) return done(err);
				// write back the settings
				var fpath = path.join(args.dpath, &#x27;settings.json&#x27;),
					updated = settings.<span class="apidocCodeKeywordSpan">refresh</span>(args.settings, data);
				fs.writeFileSync(fpath, JSON.stringify(updated, null, 4), &#x27;utf8&#x27;);

				args.settings = updated;
				done();
			});
		}
	], function (err) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.stc" id="apidoc.module.express-admin.stc">module express-admin.stc</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.stc.get" id="apidoc.element.express-admin.stc.get">
        function <span class="apidocSignatureSpan">express-admin.stc.</span>get
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (args) {
	var columns = args.config.columns;
	for (var i=0; i &#x3c; columns.length; i++) {
		var control = columns[i].control;
		if (!(control.options instanceof Array)) continue;

		if (control.select) {
			columns[i].value = getSelect(control.options);
		}
		else if (control.radio) {
			columns[i].value = getRadio(control.options);
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.table" id="apidoc.module.express-admin.table">module express-admin.table</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.table.blank" id="apidoc.element.express-admin.table.blank">
        function <span class="apidocSignatureSpan">express-admin.table.</span>blank
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">blank = function (args) {
	var table = args.config.table,
		columns = args.config.columns;

	var names = [], blank = [];
	for (var i=0; i &#x3c; columns.length; i++) {
		names.push(columns[i].name);
		blank.push(dcopy(columns[i]));
	}

	for (var i=0; i &#x3c; names.length; i++) {
		if (args.type === &#x27;view&#x27;) {
			blank[i].key = args.type+&#x27;[&#x27;+table.name+&#x27;][records][0][columns][&#x27;+names[i]+&#x27;]&#x27;;
		} else {
			blank[i].key = args.type+&#x27;[&#x27;+table.name+&#x27;][blank][index][columns][&#x27;+names[i]+&#x27;]&#x27;;
		}
	}

	return blank;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// `rows` comes either from sql select of from post request
exports.get = function (args, rows) {
	return {
		name: args.config.table.name,
		verbose: args.config.table.verbose,
		records: this.records(args, rows),
		blank: this.<span class="apidocCodeKeywordSpan">blank</span>(args),
		insert: this.insert(args)
	};
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.table.get" id="apidoc.element.express-admin.table.get">
        function <span class="apidocSignatureSpan">express-admin.table.</span>get
        <span class="apidocSignatureSpan">(args, rows)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (args, rows) {
	return {
		name: args.config.table.name,
		verbose: args.config.table.verbose,
		records: this.records(args, rows),
		blank: this.blank(args),
		insert: this.insert(args)
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.table.insert" id="apidoc.element.express-admin.table.insert">
        function <span class="apidocSignatureSpan">express-admin.table.</span>insert
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insert = function (args) {
	var table = args.config.table;
	return {
		key: args.type+&#x27;[&#x27;+table.name+&#x27;][blank][index][insert]&#x27;,
		value: true
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		for (var i=0; i &#x3c; fk.length; i++) {
			record.columns[fk[i]] = args.id[i];
		}
	},
	// settings - current table settings, record - current record data
	query: function (args, settings, record) {
		if (record.insert) {
			var str = qb.tbl.<span class="apidocCodeKeywordSpan">insert</span>(args, settings, record);
			var action = &#x27;insert&#x27;;

		} else if (record.remove || args.action == &#x27;remove&#x27;) {
			var str = qb.tbl.remove(args, settings, record);
			var action = &#x27;remove&#x27;;

		} else { // update
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.table.records" id="apidoc.element.express-admin.table.records">
        function <span class="apidocSignatureSpan">express-admin.table.</span>records
        <span class="apidocSignatureSpan">(args, rows)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">records = function (args, rows) {
	var table = args.config.table;
	var records = [];
	for (var i=0; i &#x3c; rows.length; i++) {

		var values = rows[i].columns,
			record = args.type+&#x27;[&#x27;+table.name+&#x27;][records][&#x27;+i+&#x27;]&#x27;;

		var pk = {
			key: record+&#x27;[pk]&#x27;,
			value: rows[i].pk || values[&#x27;__pk&#x27;]
		};
		
		var insert = rows[i].insert
			? {
				key: record+&#x27;[insert]&#x27;,
				value: true
			} : null;

		var remove = {
			key: record+&#x27;[remove]&#x27;,
			value: rows[i].remove ? true : null
		};

		var columns = dcopy(args.config.columns);
		for (var j=0; j &#x3c; columns.length; j++) {
			
			var column = columns[j];
			column.key = record+&#x27;[columns][&#x27;+column.name+&#x27;]&#x27;;
			
			var value = values[column.name];
			column.error = validate.value(column, value);
			column.value = format.form.value(column, value);
			args.error = column.error ? true : args.error;
		}
		records.push({pk: pk, columns: columns, insert: insert, remove: remove});
	}
	return records;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

// `rows` comes either from sql select of from post request
exports.get = function (args, rows) {
	return {
		name: args.config.table.name,
		verbose: args.config.table.verbose,
		records: this.<span class="apidocCodeKeywordSpan">records</span>(args, rows),
		blank: this.blank(args),
		insert: this.insert(args)
	};
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.tbl" id="apidoc.module.express-admin.tbl">module express-admin.tbl</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.tbl.get" id="apidoc.element.express-admin.tbl.get">
        function <span class="apidocSignatureSpan">express-admin.tbl.</span>get
        <span class="apidocSignatureSpan">(args, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (args, done) {
	if (args.post) {
		var table = args.config.table,
			rows = args.post[table.name].records || [];
		return done(null, rows);
	}

	var str = qb.tbl.select(args);
	args.db.client.query(str, function (err, rows) {
		if (err) return done(err);
		var result = [];
		for (var i=0; i &#x3c; rows.length; i++) {
			result.push({columns: rows[i]});
		}
		done(null, result);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		res.locals.root = args.config.app.root;
		res.locals.libs = args.libs;
		res.locals.themes = args.themes;
		res.locals.layouts = args.layouts;
		res.locals.languages = args.languages;

		// required for custom views
		res.locals._admin.views = app.<span class="apidocCodeKeywordSpan">get</span>(&#x27;views&#x27;);

		next();
	});

	// routes

	// init regexes
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.update" id="apidoc.module.express-admin.update">module express-admin.update</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.update.update" id="apidoc.element.express-admin.update.update">
        function <span class="apidocSignatureSpan">express-admin.</span>update
        <span class="apidocSignatureSpan">(args, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (args, done) {
	var types = /insert|update/.test(args.action)
		? [&#x27;view&#x27;, &#x27;oneToOne&#x27;, &#x27;manyToOne&#x27;]
		// remove
		: [&#x27;oneToOne&#x27;, &#x27;manyToOne&#x27;, &#x27;view&#x27;];

	async.eachSeries(types, function (type, done) {
		args.type = type;
		args.tables = args.data[type];
		if (!args.tables) return done();

		async.eachSeries(Object.keys(args.tables), function (table, done) {
			var records = args.tables[table].records;
			if (!records) return done();

			async.eachSeries(records, function (record, done) {
				var settings = args.settings[table];
				tbl.inline(args, settings, record);

				var data = tbl.query(args, settings, record);
				tbl.execute(data.action, args, data.query, record, settings, done);
			}, done);
		}, done);
	}, done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			var action = &#x27;insert&#x27;;

		} else if (record.remove || args.action == &#x27;remove&#x27;) {
			var str = qb.tbl.remove(args, settings, record);
			var action = &#x27;remove&#x27;;

		} else { // update
			var str = qb.tbl.<span class="apidocCodeKeywordSpan">update</span>(args, settings, record);
			var action = &#x27;update&#x27;;
		}

		return {action:action, query:str};
	},
	_pks: function (args, settings, record, result) {
		var pks = settings.table.pk instanceof Array ? settings.table.pk : [settings.table.pk],
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.upload" id="apidoc.module.express-admin.upload">module express-admin.upload</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.upload.loopRecords" id="apidoc.element.express-admin.upload.loopRecords">
        function <span class="apidocSignatureSpan">express-admin.upload.</span>loopRecords
        <span class="apidocSignatureSpan">(args, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loopRecords = function (args, cb) {
	if (!args.files) return cb();

	var files = args.files[args.config.table.name],
		post = args.post[args.config.table.name];
	if (!files.records) return cb();
	(function loop (index) {
		if (index == files.records.length) return cb();
		loopColumns(args, files.records[index], post.records[index], function (err) {
			if (err) return cb(err);
			loop(++index);
		});
	}(0));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.user" id="apidoc.module.express-admin.user">module express-admin.user</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.user.create" id="apidoc.element.express-admin.user.create">
        function <span class="apidocSignatureSpan">express-admin.user.</span>create
        <span class="apidocSignatureSpan">(name, pass, admin, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (name, pass, admin, cb) {
	pwd.hash(pass, function (err, salt, hash) {
		if (err) return cb(err);
		var user = {
			name: name,
			admin: admin,
			salt: salt,
			hash: hash
		};
		cb(null, user);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		console.log(&#x27;Config directory path doesn\&#x27;t exists!&#x27;.red);
		process.exit();
	}
	if (project.exists(args.dpath)) return cb();
	// else
	cli.promptForData(function (err, data) {
		if (err) return cb(err);
		project.<span class="apidocCodeKeywordSpan">create</span>(args.dpath, data, cb);
	});
}

// sets args.db.client
// updates args.settings
function initDatabase (args, done) {
	try {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express-admin.validate" id="apidoc.module.express-admin.validate">module express-admin.validate</a></h1>


    <h2>
        <a href="#apidoc.element.express-admin.validate.admin" id="apidoc.element.express-admin.validate.admin">
        function <span class="apidocSignatureSpan">express-admin.validate.</span>admin
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">admin = function (input) {
	
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express-admin.validate.adminPassword" id="apidoc.element.express-admin.validate.adminPassword">
        function <span class="apidocSignatureSpan">express-admin.validate.</span>adminPassword
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">adminPassword = function (input) {
	function check (regex) {
		var match = input.match(regex);
		if (match &#x26;&#x26; match.length &#x3e; 1) return true;
		return false;
	}
	return check(/[A-Z]/g) &#x26;&#x26; check(/[a-z]/g) &#x26;&#x26; check(/[0-9]/g)
		? true : false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}
			cb(input);
		});
	}

	function pass (cb) {
		self.prompt(&#x27;Admin password: &#x27;, function (input) {
			if (!validate.<span class="apidocCodeKeywordSpan">adminPassword</span>(input)) {
				console.log((
					&#x27;Must contains at least:\n&#x27;+
					&#x27;2 lower case letters, 2 upper case letters &#x27;+
					&#x27;and 2 digits&#x27;).red);
				return pass(cb);
			}
			cb(input);
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
